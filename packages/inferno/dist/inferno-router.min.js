!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","inferno"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno.createElement,t.Inferno.Component,t.Inferno))}(this,function(t,e,r){"use strict";function n(e,r){var n=r.router,o=e.activeClassName,i=e.activeStyle,p=e.className,a=e.to,u={href:a};return p&&(u.className=p),n.location.pathname===a&&(o&&(u.className=(p?p+" ":"")+o),i&&(u.style=Object.assign({},e.style,i))),u.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),n.push(a,t.target.textContent))},t("a",u,e.children)}function o(e){return e.to="/",t(n,e)}function i(t){return W(t)?t:t?[t]:t}function p(t){return"string"==typeof t}function a(t){return"string"!=typeof t?t:decodeURIComponent(t)}function u(t){return!t||!(W(t)?t:Object.keys(t)).length}function c(t){var e=[];return v(t,e),e}function s(t){return p(t)?t:t.pathname+t.search}function l(t){if(""===t)return F;for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n],i=o.split("=").map(h),p=i[0],a=i[1];e[p]?(e[p]=W(e[p])?e[p]:[e[p]],e[p].push(a)):e[p]=a}return e}function f(t,e){var r=t.props||F,n=e.props||F,o=m(n.path)-m(r.path);return o||n.path&&r.path?n.path.length-r.path.length:0}function h(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function d(t){return t.replace(/(^\/+|\/+$)/g,"")}function m(t){return void 0===t&&(t=""),(d(t).match(/\/+/g)||"").length}function v(t,e){for(var r=0;r<t.length;r++){var n=t[r];W(n)?v(n,e):e.push(n)}}function y(t,e){return e={exports:{}},t(e,e.exports),e.exports}function g(t,e){for(var r,n=[],o=0,i=0,p="",a=e&&e.delimiter||"/";null!=(r=B.exec(t));){var u=r[0],c=r[1],s=r.index;if(p+=t.slice(i,s),i=s+u.length,c)p+=c[1];else{var l=t[i],f=r[2],h=r[3],d=r[4],m=r[5],v=r[6],y=r[7];p&&(n.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===v||"*"===v,b="?"===v||"*"===v,E=r[2]||a,w=d||m;n.push({name:h||o++,prefix:f||"",delimiter:E,optional:b,repeat:x,partial:g,asterisk:!!y,pattern:w?j(w):y?".*":"[^"+R(E)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&n.push(p),n}function x(t,e){return w(g(t,e))}function b(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function E(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function w(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=n||{},a=p.pretty?b:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var s,l=i[c.name];if(null==l){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(M(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(s=a(l[f]),!e[u].test(s))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===f?c.prefix:c.delimiter)+s}}else{if(s=c.asterisk?E(l):a(l),!e[u].test(s))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+s+'"');o+=c.prefix+s}}else o+=c}return o}}function R(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function j(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function k(t,e){return t.keys=e,t}function _(t){return t.sensitive?"":"i"}function I(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return k(t,e)}function O(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(U(t[o],e,r).source);var i=new RegExp("(?:"+n.join("|")+")",_(r));return k(i,e)}function T(t,e,r){return C(g(t,r),e,r)}function C(t,e,r){M(e)||(r=e||r,e=[]),r=r||{};for(var n=r.strict,o=r.end!==!1,i="",p=0;p<t.length;p++){var a=t[p];if("string"==typeof a)i+=R(a);else{var u=R(a.prefix),c="(?:"+a.pattern+")";e.push(a),a.repeat&&(c+="(?:"+u+c+")*"),c=a.optional?a.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",i+=c}}var s=R(r.delimiter||"/"),l=i.slice(-s.length)===s;return n||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+s+"|$)",k(new RegExp("^"+i,_(r)),e)}function U(t,e,r){return M(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?I(t,e):M(t)?O(t,e,r):T(t,e,r)}function $(t,e){var r=s(e),n=A(i(t),r,"/");return n}function A(t,e,n){void 0===e&&(e="/"),void 0===n&&(n="/");var o=W(t)?c(t):i(t),p=e.split("?"),a=p[0];void 0===a&&(a="/");var s=p[1];void 0===s&&(s="");var h=l(s);o.sort(f);for(var d=0;d<o.length;d++){var m=o[d],v=(n+(m.props&&m.props.path||"/")).replace("//","/"),y=!m.props||u(m.props.children),g=N(y,v,a);if(g){var x=null;if(m.props&&m.props.children){var b=A(m.props.children,a,v);b&&(x=b.matched,Object.assign(h,b.matched.props.params))}return{location:v,matched:r.cloneVNode(m,{children:x,params:Object.assign(h,g.params),component:m.props.component})}}}}function N(t,e,r){var n=e+"|"+t,o=H.get(n);if(!o){var i=[];o={pattern:G(e,i,{end:t}),keys:i},H.set(n,o)}var p=o.pattern.exec(r);if(!p)return null;for(var u=p[0],c=Object.create(null),s=1;s<p.length;s+=1)c[o.keys[s-1].name]=a(p[s]);return{path:""===u?"/":u,params:c}}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r;var S=function(e){function r(t,r){e.call(this,t,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this,e=this.props,r=e.onEnter,n=this.context,o=n.router;r&&setImmediate(function(){r({props:t.props,router:o})})},r.prototype.componentWillUnmount=function(){var t=this.props,e=t.onLeave,r=this.context,n=r.router;e&&e({props:this.props,router:n})},r.prototype.render=function(e){var r=e.component,n=e.children,o=e.params;return t(r,{params:o,children:n})},r}(e),q=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.render=function(e){var r=e.component,n=e.children,o=e.params,i=e.path;return void 0===i&&(i="/"),t(r,{path:i,params:o,children:n})},r}(S),W=Array.isArray,F=Object.create(null),L=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},M=L,J=U,K=g,D=x,V=w,z=C,B=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");J.parse=K,J.compile=D,J.tokensToFunction=V,J.tokensToRegExp=z;var G=y(function(t){var e=J;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),H=new Map,P=function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){var e=t.children,r=t.location,n=t.matched;if(void 0===n&&(n=null),n)return n;var o=$(e,r);return o.matched},e}(e),Q=function(e){function r(t,r){if(e.call(this,t,r),!t.history)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');this.router=t.history;var n=this.router.location.pathname+this.router.location.search;this.state={url:t.url||("blank"!==n?n:"/")}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(e){var r=e.children,n=e.url;return t(P,{location:n||this.state.url,router:this.router},r)},r}(e),X={Route:S,IndexRoute:q,Router:Q,RouterContext:P,Link:n,IndexLink:o,match:$};return X});

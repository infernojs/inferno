!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","inferno"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno.createElement,t.Inferno.Component,t.Inferno))}(this,function(t,e,r){"use strict";function n(e,r){var n=r.router,o=e.activeClassName,i=e.activeStyle,p=e.className,a=e.onClick,u=e.to,c={href:u};return p&&(c.className=p),n.location.pathname===u&&(o&&(c.className=(p?p+" ":"")+o),i&&(c.style=Object.assign({},e.style,i))),c.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),"function"==typeof a&&a(),n.push(u,t.target.textContent))},t("a",c,e.children)}function o(e){return e.to="/",t(n,e)}function i(t,e){return e={exports:{}},t(e,e.exports),e.exports}function p(t,e){for(var r,n=[],o=0,i=0,p="",a=e&&e.delimiter||"/";null!=(r=G.exec(t));){var u=r[0],c=r[1],s=r.index;if(p+=t.slice(i,s),i=s+u.length,c)p+=c[1];else{var h=t[i],m=r[2],d=r[3],v=r[4],y=r[5],g=r[6],x=r[7];p&&(n.push(p),p="");var b=null!=m&&null!=h&&h!==m,O="+"===g||"*"===g,j="?"===g||"*"===g,w=r[2]||a,E=v||y;n.push({name:d||o++,prefix:m||"",delimiter:w,optional:j,repeat:O,partial:b,asterisk:!!x,pattern:E?f(E):x?".*":"[^"+l(w)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&n.push(p),n}function a(t,e){return s(p(t,e))}function u(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function c(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=n||{},a=p.pretty?u:encodeURIComponent,s=0;s<t.length;s++){var l=t[s];if("string"!=typeof l){var f,h=i[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(J(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var m=0;m<h.length;m++){if(f=a(h[m]),!e[s].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===m?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?c(h):a(h),!e[s].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');o+=l.prefix+f}}else o+=l}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function f(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function h(t,e){return t.keys=e,t}function m(t){return t.sensitive?"":"i"}function d(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(t,e)}function v(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(x(t[o],e,r).source);var i=new RegExp("(?:"+n.join("|")+")",m(r));return h(i,e)}function y(t,e,r){return g(p(t,r),e,r)}function g(t,e,r){J(e)||(r=e||r,e=[]),r=r||{};for(var n=r.strict,o=r.end!==!1,i="",p=0;p<t.length;p++){var a=t[p];if("string"==typeof a)i+=l(a);else{var u=l(a.prefix),c="(?:"+a.pattern+")";e.push(a),a.repeat&&(c+="(?:"+u+c+")*"),c=a.optional?a.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",i+=c}}var s=l(r.delimiter||"/"),f=i.slice(-s.length)===s;return n||(i=(f?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&f?"":"(?="+s+"|$)",h(new RegExp("^"+i,m(r)),e)}function x(t,e,r){return J(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?d(t,e):J(t)?v(t,e,r):y(t,e,r)}function b(t){return Q(t)?t:t?[t]:t}function O(t){return"string"==typeof t}function j(t){return"string"!=typeof t?t:decodeURIComponent(t)}function w(t){return!t||!(Q(t)?t:Object.keys(t)).length}function E(t){var e=[];return U(t,e),e}function R(t){return O(t)?t:t.pathname+t.search}function k(t){if(""===t)return X;for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n],i=o.split("=").map(I),p=i[0],a=i[1];e[p]?(e[p]=Q(e[p])?e[p]:[e[p]],e[p].push(a)):e[p]=a}return e}function _(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function C(t,e){var r=t.props||X,n=e.props||X,o=S(n.path)-S(r.path);return o||n.path&&r.path?n.path.length-r.path.length:0}function I(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function T(t){return t.replace(/(^\/+|\/+$)/g,"")}function S(t){return void 0===t&&(t=""),(T(t).match(/\/+/g)||"").length}function U(t,e){for(var r=0;r<t.length;r++){var n=t[r];Q(n)?U(n,e):e.push(n)}}function $(t,e){var r=R(e),n=A(b(t),r,"/");return n}function A(t,e,n){void 0===e&&(e="/"),void 0===n&&(n="/");var o=Q(t)?E(t):b(t),i=e.split("?"),p=i[0];void 0===p&&(p="/");var a=i[1];void 0===a&&(a="");var u=k(a);o.sort(C);for(var c=0;c<o.length;c++){var s=o[c],l=s.props&&s.props.path||"/",f=n+_(l,n).replace(/\/\//g,"/"),h=!s.props||w(s.props.children),m=N(h,f,p);if(m){var d=null;if(s.props&&s.props.children){var v=A(s.props.children,p,f);v&&(d=v.matched,Object.assign(u,v.matched.props.params))}var y=r.cloneVNode(s,{params:Object.assign(u,m.params)},d);return{location:f,matched:y}}}}function N(t,e,r){var n=e+"|"+t,o=Y.get(n);if(!o){var i=[];o={pattern:H(e,i,{end:t}),keys:i},Y.set(n,o)}var p=o.pattern.exec(r);if(!p)return null;for(var a=p[0],u=Object.create(null),c=1;c<p.length;c+=1)u[o.keys[c-1].name]=j(p[c]);return{path:""===a?"/":a,params:u}}function P(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,listen:t.listen,get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r;var L=Object.assign||function(t){for(var e,r=arguments,n=1,o=arguments.length;n<o;n++){e=r[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},W=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},q=function(e){function r(t,r){e.call(this,t,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this,e=this.props,r=e.onEnter,n=this.context,o=n.router;r&&Promise.resolve().then(function(){r({props:t.props,router:o})})},r.prototype.onLeave=function t(e){void 0===e&&(e=!1);var r=this.props,t=r.onLeave,n=this.context,o=n.router;t&&e&&t({props:this.props,router:o})},r.prototype.componentWillUnmount=function(){this.onLeave(!0)},r.prototype.componentWillReceiveProps=function(t){this.onLeave(this.props.path!==t.path)},r.prototype.render=function(e){var r=e.component,n=e.children,o=e.params,i=W(e,["component","children","params"]);return t(r,L({params:o},i),n)},r}(e),F=function(t){function e(e,r){t.call(this,e,r),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(q),M=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},J=M,K=x,D=p,V=a,z=s,B=g,G=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");K.parse=D,K.compile=V,K.tokensToFunction=z,K.tokensToRegExp=B;var H=i(function(t){var e=K;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),Q=Array.isArray,X=Object.create(null),Y=new Map,Z=function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){var e=t.routes,r=t.matched,n=t.location;if(r)return r;var o=$(e,n);return o.matched},e}(e),tt=function(e){function r(t,r){e.call(this,t,r),this.router=P(t.history),this.state={url:t.url||this.router.url}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},r.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(){return t(Z,{location:this.state.url,router:this.router,routes:this.props.children})},r}(e),et={Route:q,IndexRoute:F,Router:tt,RouterContext:Z,Link:n,IndexLink:o,match:$};return et});

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.InfernoServer=n()}(this,function(){"use strict";function e(e){return{create:function(){return e}}}function n(e,n){return null!==n&&(e&n)===n}function t(e){for(var n=0,t=void 0;n<=e.length;){if(t=e[n],!isNaN(1*t))return!1;if(t==t.toUpperCase())return!1;if(t===t.toLowerCase())return!0;n++}return!1}function l(e){var n=e.attrs&&e.attrs.value;if(!W(n)){var t={};if(p(n))for(var l=0,o=n.length;o>l;l++)t[n[l]]=n[l];else t[n]=n;r(e,t),e.attrs&&e.attrs.value&&delete e.attrs.value}}function r(e,n){if("option"===e.tag){var t=e.attrs&&e.attrs.value;n[t]&&(e.attrs=e.attrs||{},e.attrs.selected="selected")}else for(var l=0,o=e.children.length;o>l;l++)r(e.children[l],n)}function o(e,n){var l="";for(var r in e)if(t(r)){var o=e[r];W(o)||(g[r]||"string"!=typeof o&&(o+="px"),l+=r+":",l+=o+";")}return l||null}function i(e,n){if("data-inferno"===e)return""+e;var l=V[e]||null;if(l){if(W(n)||l.hasBooleanValue&&!n||l.hasNumericValue&&n!==n||l.hasPositiveNumericValue&&1>n||"false"===n||0===n.length)return"";var r=l.attributeName;return r+"="+H(n)}return W(n)||!t(e)?"":(A[e]||e.toLowerCase())+"="+H(n)}function a(e,n){var t="";for(var l in e){var r=e[l];if(!W(r)){"style"===l&&(r=o(r));var a=null;a=i(l,r),a&&(t+=" "+a)}}return t}function u(e){var n=!1;return p(e)?e.map(function(e,t){return m(e)?n?(n=!0,"<!---->"+e):(n=!0,e):(n=!1,c(!1,e))}).join(""):m(e)?e:c(!1,e)}function c(e,n){var t=void 0;if(W(n))return"";if(n.tag){var r="string"==typeof n.tag&&n.tag.toLowerCase(),o=n.attrs,i={};for(var c in n.attrs){if("value"===c){if("select"===r){l(n);continue}if("textarea"===r||o.contenteditable){n.text=o[c];continue}}i[c]=o[c]}e&&(i["data-inferno"]=!0),t="<"+r,i.innerHTML?n.text=i.innerHTML:t+=a(i,null),R[r]?t+=" />":(t+=">",W(n.children)?W(n.text)||(t+=n.text):t+=u(n.children),t+="</"+r+">")}return t}function s(n,t,l){var r=l.get(n),o=void 0;return r?o:e(c(t,n))}function f(e){return e.tree.html.create(e)}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p=function(e){return e.constructor===Array},m=function(e){return"string"==typeof e||"number"==typeof e},x=function(){},h=!("undefined"==typeof window||"undefined"==typeof document||!window.document.createElement),k={canUseDOM:h,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:h&&!!window.addEventListener,canUseViewport:h&&!!window.screen,canUseSymbol:"function"==typeof Symbol&&"function"==typeof Symbol["for"]},y={},v=/\-./g,g={"animation-iteration-count":!0,"box-flex":!0,"box-flex-group":!0,"column-count":!0,"counter-increment":!0,"fill-opacity":!0,flex:!0,"flex-grow":!0,"flex-order":!0,"flex-positive":!0,"flex-shrink":!0,"float":!0,"font-weight":!0,"grid-column":!0,"line-height":!0,"line-clamp":!0,opacity:!0,order:!0,orphans:!0,"stop-opacity":!0,"stroke-dashoffset":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,transform:!0,"transform-origin":!0,widows:!0,"z-index":!0,zoom:!0},w=["Top","Right","Bottom","Left"],b=function(e,n){return w.map(function(t){return(e||"")+t+(n||"")})},S={font:[],padding:b("padding"),margin:b("margin"),"border-width":b("border","Width"),"border-style":b("border","Style")},T=function(e){return e.replace(v,function(e){return e[1].toUpperCase()})};k.canUseDOM&&!function(){var e=document.documentElement,n=window.getComputedStyle(e),t=Array.prototype.slice.call(n,0);for(var l in e.style)n[l]||t.push(l);t.forEach(function(e){var n="-"===e[0]?e.substr(1,e.indexOf("-",1)-1):null,t=T(e);y[t]={unPrefixed:n?e.substr(n.length+2):e,unitless:g[e]?!0:!1,shorthand:null}});var r={1:function(e,n,t){return n.forEach(function(n){return t[n]=e[0]})},2:function(e,n,t){return e.forEach(function(e,l){t[n[l]]=t[n[l+2]]=e})},4:function(e,n,t){return n.forEach(function(n,l){t[n]=e[l]})}};Object.keys(S).forEach(function(e){var n=T(e);y[n]={unPrefixed:e,unitless:!1,shorthand:function(n,t){var l="undefined"==typeof n?"undefined":d(n);if("number"===l&&(n+="px"),n)if("cssText"in t)t.cssText+=";"+e+":"+n;else{var o=n.split(" ");(r[o.length]||x)(o,S[e],t)}}}})}();var C=1,L=2,E=4,M=6,N="http://www.w3.org/1999/xlink",O="http://www.w3.org/XML/1998/namespace",z={"xlink:actuate":N,"xlink:arcrole":N,"xlink:href":N,"xlink:role":N,"xlink:show":N,"xlink:title":N,"xlink:type":N,"xml:base":O,"xml:lang":O,"xml:space":O,xlinkActuate:N,xlinkArcrole:N,xlinkHref:N,xlinkRole:N,xlinkShow:N,xlinkTitle:N,xlinkType:N},A={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"},U={autoComplete:"autocomplete",autoFocus:"autofocus",autoSave:"autosave"},P={allowFullScreen:L,async:L,autoFocus:L,autoPlay:L,capture:L,checked:C|L,controls:L,currentTime:C|M,"default":L,defaultChecked:L,defaultMuted:L,defaultSelected:L,defer:L,disabled:C|L,download:L,enabled:L,formNoValidate:L,hidden:C|L,loop:L,multiple:C|L,muted:C|L,mediaGroup:C,noValidate:L,noShade:C|L,noResize:L,noWrap:L,typeMustMatch:L,open:L,paused:C,playbackRate:C|E,readOnly:L,required:C|L,reversed:L,radioGroup:C,icon:C,draggable:L,dropzone:null,scoped:C|L,visible:L,trueSpeed:L,sandbox:null,sortable:L,inert:L,indeterminate:L,nohref:L,compact:L,declare:L,ismap:C|L,pauseOnExit:C|L,seamless:L,translate:L,selected:C|L,srcLang:C,srcObject:C,value:C,volume:C|M,itemScope:L,className:null,tabindex:C|E,xlinkActuate:null,xlinkArcrole:null,xlinkHref:null,xlinkRole:null,xlinkShow:null,xlinkTitle:null,xlinkType:null,xmlBase:null,xmlLang:null,xmlSpace:null,clipPath:null,fillOpacity:null,fontFamily:null,fontSize:null,markerEnd:null,markerMid:null,markerStart:null,stopColor:null,stopOpacity:null,strokeDasharray:null,strokeLinecap:null,strokeOpacity:null,strokeWidth:null,textAnchor:null,cols:M,rows:E,rowspan:E,size:M,sizes:E,start:E,"xlink:actuate":null,"xlink:arcrole":null,"xlink:href":null,"xlink:role":null,"xlink:show":null,"xlink:title":null,"xlink:type":null,"xml:base":null,"xml:lang":null,"xml:space":null,id:null,dir:null,title:null,autocorrect:null,autoCapitalize:null,type:null,form:null,formAction:null,formEncType:null,formMethod:null,formTarget:null,frameBorder:null,unselectable:null,continuous:L,srcSet:null,inlist:null,minLength:null,marginWidth:null,marginHeight:null,list:null,keyType:null,is:null,inputMode:null,height:null,width:null,dateTime:null,contenteditable:null,contextMenu:null,classID:null,cellPadding:null,cellSpacing:null,charSet:null,allowTransparency:null,spellcheck:null,srcDoc:C},V={};for(var B in P){var I=P[B];V[B]={attributeName:A[B]||B.toLowerCase(),attributeNamespace:z[B]?z[B]:null,propertyName:U[B]||B,mustUseProperty:n(I,C),hasBooleanValue:n(I,L),hasNumericValue:n(I,E),hasPositiveNumericValue:n(I,M)}}var W=function(e){return null===e||void 0===e},D={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","`":"&#x60;","'":"&#x27;"},F=/[&><"'`]/g,H=function(e){return'"'+(""+e).replace(F,function(e){return D[e]})+'"'},R={area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},q=q||("undefined"!=typeof window?window:null);if(q&&q.Inferno)q.Inferno.addTreeConstructor("html",s);else if(q&&!q.Inferno){var j=void 0;try{j=require("inferno")}catch(G){j=null}if(null!=j){if("function"!=typeof j.addTreeConstructor)throw"Your package is out-of-date! Upgrade to latest Inferno in order to use the InfernoServer package.";j.addTreeConstructor("html",s)}}var X={renderToString:f};return X});